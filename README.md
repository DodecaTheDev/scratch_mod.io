<svg width="600" height="300" viewBox="0 0 600 300" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_4_2)">
<rect width="600" height="300" fill="#1D1D1F"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M341.711 115.522C336.875 115.522 332.167 114.881 327.699 113.711C327.293 116.381 327.072 119.125 327.072 121.905C327.072 126.57 327.662 131.07 328.789 135.387C316.217 137.197 305.048 143.252 296.777 152.032C291.811 146.91 285.848 142.777 279.202 139.905C275.861 149.691 269.787 158.233 261.867 164.599C273.461 167.233 282.1 177.513 282.1 189.805V189.878H282.119C287.713 191.268 293.546 192 299.565 192C303.811 192 307.964 191.616 312.026 190.902C312.081 190.884 312.137 190.884 312.192 190.884C312.746 177.129 324.192 166.154 338.241 166.154C343.114 166.154 347.674 167.489 351.588 169.794C352.142 169.227 352.659 168.623 353.194 168.019C359.36 161.105 364.215 153.02 367.317 144.094C367.298 144.075 367.28 144.057 367.262 144.057C360.062 139.447 355.28 131.436 355.28 122.308C355.28 119.162 355.853 116.162 356.886 113.381C352.05 114.772 346.973 115.522 341.711 115.522ZM354.671 75.6635C353.545 76.2306 352.363 76.7062 351.163 77.1086C348.542 77.9866 345.736 78.4805 342.801 78.4805C328.382 78.4805 316.697 66.9017 316.697 52.6158C316.697 52.4328 316.715 52.2499 316.715 52.067C316.697 52.067 316.678 52.067 316.66 52.0487C311.177 50.7134 305.435 50 299.528 50C295.282 50 291.128 50.3841 287.085 51.0975C287.048 51.0975 286.993 51.1158 286.956 51.1158C286.365 64.8896 274.919 75.8648 260.87 75.8648C255.978 75.8648 251.4 74.5294 247.486 72.2064L247.43 72.2613C240.507 79.5048 235.135 88.1935 231.775 97.8333C231.757 97.8699 231.757 97.8882 231.738 97.9248C238.938 102.534 243.72 110.546 243.72 119.674C243.72 129.112 238.624 137.362 231 141.88V141.899C231.018 141.953 231.037 142.027 231.055 142.081C233.898 151.136 238.514 159.422 244.514 166.519C256.458 160.282 265.781 149.819 270.451 137.124C270.47 137.088 270.488 137.051 270.488 137.015C272.593 131.271 273.738 125.07 273.738 118.595C273.738 114.241 273.202 109.997 272.224 105.937C283.817 103.76 294.1 97.9614 301.854 89.7849C309.183 97.5224 318.783 103.12 329.601 105.534L330.155 105.644C333.865 106.431 337.724 106.87 341.674 106.87C350.905 106.87 359.582 104.601 367.206 100.595C367.465 100.431 367.723 100.248 368 100.083C365.212 91.047 360.634 82.7608 354.671 75.6635Z" fill="#07C1D8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M403.651 250.134H403.054V246.024H401.685V245.449H405.025V246.024H403.657L403.651 250.134ZM407.789 249.047L409.067 245.449H410V250.137H409.378V246.218L407.963 250.134H407.584L406.175 246.218V250.134H405.585V245.446H406.517L407.789 249.047ZM381.124 251C392.573 251 400.567 242.965 400.567 232.547C400.567 222.13 392.573 214.095 381.124 214.095C369.675 214.095 361.681 222.13 361.681 232.547C361.681 242.965 369.675 251 381.124 251ZM381.124 241.467C375.908 241.467 372.249 237.79 372.249 232.547C372.249 227.304 375.908 223.628 381.124 223.628C386.34 223.628 389.999 227.304 389.999 232.547C389.999 237.79 386.34 241.467 381.124 241.467ZM347.152 209.737H357.721V200H347.152V209.737ZM347.152 249.911H357.721V215.184H347.152V249.911ZM332.513 249.911H342.904V239.466H332.513V249.911ZM317.768 204.362V217.159C314.923 215.184 311.4 214.095 307.403 214.095C297.173 214.095 289.721 221.585 289.721 232.547C289.721 243.51 297.173 251 307.471 251C312.281 251 316.481 249.366 319.529 246.506L321.088 249.911H328.404V200L317.768 204.362ZM309.368 241.467C304.083 241.467 300.29 237.654 300.29 232.547C300.29 227.441 304.083 223.628 309.368 223.628C314.652 223.628 318.446 227.441 318.446 232.547C318.446 237.654 314.652 241.467 309.368 241.467ZM267.135 251C278.584 251 286.578 242.965 286.578 232.547C286.578 222.13 278.584 214.095 267.135 214.095C255.686 214.095 247.692 222.13 247.692 232.547C247.692 242.965 255.686 251 267.135 251ZM267.135 241.467C261.918 241.467 258.26 237.79 258.26 232.547C258.26 227.304 261.918 223.628 267.135 223.628C272.351 223.628 276.009 227.304 276.009 232.547C276.009 237.79 272.351 241.467 267.135 241.467ZM231.325 214.095C226.854 214.095 222.653 216.069 220.147 219.542C217.979 216.001 214.321 214.095 209.646 214.095C205.514 214.095 201.584 215.865 199.01 218.861L197.317 215.184H190V249.911H200.568V231.662C200.568 226.351 203.278 223.628 206.665 223.628C209.714 223.628 211.679 225.602 211.679 230.3V249.911H222.247V231.662C222.247 226.351 224.957 223.628 228.344 223.628C231.393 223.628 233.357 225.602 233.357 230.3V249.911H243.925V228.394C243.925 219.134 238.98 214.095 231.325 214.095Z" fill="white"/>
</g>
<defs>
<clipPath id="clip0_4_2">
<rect width="600" height="300" fill="white"/>
</clipPath>
</defs>
</svg>

![modio](https://github.com/user-attachments/assets/7b7ab3d1-ae55-4f59-9785-d1879cd46815)

# mod.io PenguinMod Extension

This extension allows PenguinMod projects to interact with the [mod.io](https://mod.io/) API, enabling you to search, create, and manage mods directly from your PenguinMod projects.

## Table of Contents

- [Setup](#setup)
- [Authentication](#authentication)
- [Creating Mods](#creating-mods)
- [Managing Mod Content](#managing-mod-content)
- [Searching and Retrieving Mods](#searching-and-retrieving-mods)
- [Error Handling](#error-handling)
- [Block Reference](#block-reference)
- [Example Projects](#example-projects)

## Setup

This extension must run **unsandboxed** due to its network requests. To use it:

1. Add the extension in PenguinMod
2. Accept the unsandboxed permissions prompt
3. Set up your authentication details before using any other blocks

## Authentication

To use this extension, you'll need:

1. A mod.io API key
2. Your game ID
3. An OAuth token (ONLY required for uploading content)

### Authentication Levels

This extension supports two levels of authentication:

- **Basic Authentication** (API Key + Game ID): Sufficient for browsing, searching, and viewing mods
- **Upload Authentication** (OAuth Token): Required ONLY if your project needs to create or modify mods

### Getting Your Credentials

- **API Key**: Get this from your [mod.io dashboard](https://mod.io/me/access)
- **Game ID**: Found in your game's URL: `https://mod.io/g/GAME_ID`
- **OAuth Token**: Generate from your mod.io dashboard under API Access

### Setting Up Authentication

Use these blocks to configure your authentication details:

```
set API key [YOUR_API_KEY] and game ID [YOUR_GAME_ID]
```

For upload functionality (optional):
```
set OAuth token [YOUR_OAUTH_TOKEN] for uploading
```

⚠️ **IMPORTANT SECURITY WARNING**: 
- Never hardcode OAuth tokens in your published projects
- If your project allows users to upload mods, you should prompt them to enter their own OAuth tokens
- Each user should use their own account credentials for uploading content
- Consider adding a secure input field for users to enter their own OAuth tokens

### Example OAuth Prompt Implementation

```
When Green Flag clicked
set API key [your-api-key] and game ID [1234]
ask [Please enter your mod.io OAuth token to enable uploading:] and wait
set OAuth token (answer) for uploading
```

## Creating Mods

### Initializing a New Mod

```
create new mod with name [Mod Name] summary [Mod Description] and cover image URL [https://example.com/image.png]
```

This block:
- Creates a new mod with the specified name and summary
- Uses the provided image URL as the mod's cover image
- Sets the mod to "hidden" by default
- Stores the created mod ID for subsequent operations

⚠️ **Note**: 
- The cover image must be accessible via a public URL
- This block requires an OAuth token to be set

### Setting Mod Visibility

```
set mod visibility to [public/hidden]
```

Use this block to change the visibility of your mod after creation.

## Managing Mod Content

### Adding Mod Files

```
add zip file from URL [https://example.com/mod.zip] to current mod with version [1.0.0] changelog [Initial release]
```

This block:
- Uploads a ZIP file to your mod from the specified URL
- Sets the file version and changelog
- The ZIP file should contain all the content for your mod
- Requires OAuth authentication

### Adding Gallery Images

```
upload gallery image from URL [https://example.com/gallery-image.png] to current mod
```

Use this to add screenshots or other images to your mod's gallery.
Requires OAuth authentication.

### Adding Tags

```
add tag [game] to current mod
```

Tags help users find your mod more easily when searching.
Requires OAuth authentication.

### Adding Dependencies

```
add dependency mod ID [12345] to current mod
```

Use this if your mod requires other mods to function properly.
Requires OAuth authentication.

## Searching and Retrieving Mods

### Getting Mods for Your Game

```
get [10] mods for game
```

Returns a JSON string containing information about the specified number of mods for your game.
Only requires basic authentication (API key + Game ID).

### Getting Mod Details

```
get details for mod with ID [12345]
```

Returns detailed information about a specific mod as a JSON string.
Only requires basic authentication (API key + Game ID).

### Searching Mods

```
search mods with query [cool mod]
```

Searches for mods matching the provided query term.
Only requires basic authentication (API key + Game ID).

### Getting Current Mod ID

```
current mod ID
```

Returns the ID of the mod you're currently working with.

## Error Handling

The extension includes built-in error handling:

```
did error occur?
```

Returns true if the last operation caused an error.

```
last error
```

Returns JSON information about the last error that occurred.

## Block Reference

### Configuration Blocks

| Block | Description | Auth Level Required |
|-------|-------------|---------------------|
| `set API key [KEY] and game ID [GAME_ID]` | Sets your mod.io API key and game ID | None |
| `set OAuth token [TOKEN] for uploading` | Sets OAuth token for uploading content | None (sets up upload auth) |

### Creation Blocks

| Block | Description | Auth Level Required |
|-------|-------------|---------------------|
| `create new mod with name [NAME] summary [SUMMARY] and cover image URL [URL]` | Creates a new mod | OAuth |
| `set mod visibility to [VISIBILITY]` | Sets your mod to public or hidden | OAuth |

### Content Management Blocks

| Block | Description | Auth Level Required |
|-------|-------------|---------------------|
| `add zip file from URL [URL] to current mod with version [VERSION] changelog [CHANGELOG]` | Adds a ZIP file | OAuth |
| `upload gallery image from URL [URL] to current mod` | Adds an image to gallery | OAuth |
| `add tag [TAG] to current mod` | Adds a tag | OAuth |
| `add dependency mod ID [DEP_MOD_ID] to current mod` | Sets mod dependency | OAuth |

### Query Blocks

| Block | Description | Auth Level Required |
|-------|-------------|---------------------|
| `get [AMOUNT] mods for game` | Gets a list of mods | API Key + Game ID |
| `get details for mod with ID [MOD_ID]` | Gets details about a mod | API Key + Game ID |
| `search mods with query [QUERY]` | Searches for mods | API Key + Game ID |
| `current mod ID` | Gets the ID of the current mod | None |

### Error Handling Blocks

| Block | Description | Auth Level Required |
|-------|-------------|---------------------|
| `did error occur?` | Returns true if an error occurred | None |
| `last error` | Returns details about the last error | None |

## Example Projects

### Mod Browser (Read-Only)

```
When Green Flag clicked
set API key [your-api-key] and game ID [1234]
set variable [modList] to (get [20] mods for game)
```

### Mod Creator (With User Authentication)

```
When Green Flag clicked
set API key [your-api-key] and game ID [1234]
ask [Enter your mod.io OAuth token:] and wait
set OAuth token (answer) for uploading
create new mod with name [My Cool Mod] summary [A mod created with PenguinMod!] and cover image URL [URL to image]
add zip file from URL [URL to zip] to current mod with version [1.0.0] changelog [Initial release]
set mod visibility to [public]
```

## Tips and Best Practices

1. **User Privacy & Security**
   - Never hardcode OAuth tokens in projects
   - Always prompt users for their own OAuth tokens when uploading is needed
   - Make it clear to users why you're requesting their token
   - Consider implementing a "remember me" option that uses browser storage

2. **Authentication**
   - Only request OAuth tokens when upload functionality is needed
   - Use API key + Game ID for read-only operations

3. **Error Handling**
   - Always check for errors after operations that might fail
   - Provide user-friendly error messages

## Troubleshooting

| Problem | Solution |
|---------|----------|
| "API key and game ID must be set first" | Make sure to call the authentication blocks before any other blocks |
| "OAuth token must be set for uploading" | You're trying to use a block that requires upload permissions |
| "No mod initialized" | You must create a mod before adding content to it |
| Failed to fetch resources | Make sure your image and ZIP URLs are publicly accessible |
| Upload failures | Check that the OAuth token has proper permissions |

---

For more information about the mod.io API, visit the [official documentation](https://docs.mod.io/).
